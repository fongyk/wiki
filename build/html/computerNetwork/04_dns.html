<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. 域名 &mdash; fong alpha documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="资源链接" href="../link/index.html" />
    <link rel="prev" title="3. 网桥、交换机、路由器、网关" href="03_router.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> fong
            <img src="../_static/logo.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                alpha
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C/C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">Linux/Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machineLearning/index.html">机器学习</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepLearning/index.html">深度学习</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathematicsAlgorithm/index.html">数理与算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regularExpression/index.html">正则表达式</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">计算机网络</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_architechture.html">1. 计算机网络体系结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_tcp.html">2. TCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_router.html">3. 网桥、交换机、路由器、网关</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. 域名</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">4.1. 域名管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">4.2. 域名层次</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">4.2.1. 域名语法</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">4.2.2. 顶级域</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">4.3. 根域名服务器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">4.3.1. 域名解析的工作流程</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dig">4.4. dig 命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">4.5. 参考资料</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../link/index.html">资源链接</a></li>
<li class="toctree-l1"><a class="reference internal" href="../softwares/index.html">实用软件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tech/index.html">Tech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../else/index.html">其他</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fong</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">计算机网络</a> &raquo;</li>
      <li><span class="section-number">4. </span>域名</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/computerNetwork/04_dns.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">4. </span>域名<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h1>
<p>域名（Domain Name）是由一串用点 <code class="docutils literal notranslate"><span class="pre">.</span></code> 分隔的字符组成的互联网上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位。域名可以说是一个 IP 地址的代称，目的是为了便于记忆后者。例如， <code class="docutils literal notranslate"><span class="pre">wikipedia.org</span></code> 是一个域名，人们可以直接访问 <code class="docutils literal notranslate"><span class="pre">wikipedia.org</span></code> 来代替 IP 地址，然后域名系统（Domain Name System，DNS）就会将它映射成便于机器识别的 IP 地址。</p>
<p>在域名系统的层次结构中，各种域名都隶属于域名系统 <strong>根域</strong> 的下级。域名的第一级是顶级域，它包括通用顶级域（例如 <code class="docutils literal notranslate"><span class="pre">.com</span></code> <code class="docutils literal notranslate"><span class="pre">.net</span></code> <code class="docutils literal notranslate"><span class="pre">.org</span></code> ）以及国家和地区顶级域（例如 <code class="docutils literal notranslate"><span class="pre">.us</span></code> <code class="docutils literal notranslate"><span class="pre">.cn</span></code>  ）等。顶级域名下一层是二级域名，一级一级地往下。</p>
<a class="reference internal image-reference" href="../_images/04_dns.png"><img alt="../_images/04_dns.png" class="align-center" src="../_images/04_dns.png" style="width: 500px;" /></a>
<section id="id2">
<h2><span class="section-number">4.1. </span>域名管理<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<p>美国的互联网名称与数字地址分配机构（ICANN）负责互联网域名空间的开发和架构，只有经过它授权的域名注册管理机构和域名注册商，才能对外界提供顶级域名管理和注册服务。另外，互联网号码分配局（IANA）负责运营域名系统根区域（Root Zone）、委派顶级域名的管理，并负责 <code class="docutils literal notranslate"><span class="pre">.int</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.arpa</span></code> 两个域名的管理。</p>
</section>
<section id="id3">
<h2><span class="section-number">4.2. </span>域名层次<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<section id="id4">
<h3><span class="section-number">4.2.1. </span>域名语法<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>域名通过点号 <code class="docutils literal notranslate"><span class="pre">.</span></code> 将多个标签连接在一起。一个域名的层次结构，从右侧到左侧隔一个点依次下降一层，每个标签可以包含 1 到 63 个 ASCII 字符（八字节）。完整域名的所有字符加起来不得超过 253 个 ASCII 字符，因此当每一级都使用单个字符时，总共有 127 个层次（127 个字符加上 126 个点的总长度为 253）。</p>
<p>域名的结尾有时候还有一点，这是保留给 <strong>根节点（根域）</strong> 的，书写时通常省略，在查询时由软件内部补上。</p>
<p>域名里的英文字母不区分大小写，一般都以小写形式拼写。</p>
</section>
<section id="id5">
<h3><span class="section-number">4.2.2. </span>顶级域<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<p>顶级域（Top-Level Domains，TLD）是域名中最高的一级，每个域名都以顶级域结尾。</p>
<p>顶级域名主要分成以下几类：</p>
<ul class="simple">
<li><p>基础设施顶级域（ARPA）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.arpa</span></code></p></li>
</ul>
</li>
<li><p>通用顶级域（gTLD）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.com</span></code> 商业机构（现无限制）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.edu</span></code> 教育机构</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.gov</span></code> 政府机构</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.mil</span></code> 军事机构</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.net</span></code> 网络服务供应商使用（现无限制）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.org</span></code> 不属于其他通用顶级域类别的组织（现无限制）</p></li>
<li><p>…</p></li>
</ul>
</li>
<li><p>通用受限制顶级域（grTLD）</p></li>
<li><p>赞助类顶级域（sTLD）</p></li>
<li><p>国家和地区顶级域（ccTLD）</p>
<ul>
<li><p>中国大陆 <code class="docutils literal notranslate"><span class="pre">.cn</span></code></p></li>
<li><p>日本 <code class="docutils literal notranslate"><span class="pre">.jp</span></code></p></li>
<li><p>…</p></li>
</ul>
</li>
<li><p>测试顶级域（tTLD）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.test</span></code></p></li>
</ul>
</li>
</ul>
<p>根据 IANA <a class="reference external" href="https://data.iana.org/TLD/tlds-alpha-by-domain.txt">Top-Level Domain List</a> ，截至 2022-10-24 ，共有 1485 个有效顶级域名。</p>
</section>
</section>
<section id="id6">
<h2><span class="section-number">4.3. </span>根域名服务器<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h2>
<p>根域名服务器（Root Name Server）是域名系统（DNS）中最高级别的域名服务器，负责维护 DNS 根区文件 <a class="reference external" href="https://www.internic.net/domain/root.zone">Root Zone File</a> ，该文件保存了所有顶级域名（TLD）的托管信息，文件大小约 2 MB。对于收到的顶级域解析请求，它会返回顶级域的域名服务器 IP 地址。它们是互联网基础设施中的重要部分，因为所有域名解析操作均离不开它们。</p>
<p>由于 DNS 和某些协议的共同限制，根域名服务器地址的数量被限制为 13 个。根域名服务器会部署多个节点，共用 IP。此外，采用任播（Anycast）技术架设镜像服务器可解决数量限制，使得实际运行的根域名服务器数量大大增加。
全球 13 组根域名服务器以英文字母 <code class="docutils literal notranslate"><span class="pre">a</span></code> 到 <code class="docutils literal notranslate"><span class="pre">m</span></code> 依序命名，域名格式为 <code class="docutils literal notranslate"><span class="pre">[a-m].root-servers.net</span></code> 。</p>
<section id="id7">
<h3><span class="section-number">4.3.1. </span>域名解析的工作流程<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<p>域名系统的每一级只知道直接下级的位置，而无法获得跨级的位置，因此在域名解析的时候，需要自上而下、逐级查询。这种机制虽然看似低效，却能够提供分布式、高容错的服务，避免让域名系统成为一个集中式的单点系统。</p>
<p>假如我要访问 <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> ：</p>
<ul>
<li><ol class="arabic simple">
<li><p>客户端首先会发出一个 DNS 请求给本地 DNS 服务器，请求查询 <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> 的 IP 。本地 DNS 服务器，属于递归解析器（DNS Recursive Resolver），一般是网络运营商提供的 DNS，也可手动修改为公共 DNS。</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>本地 DNS 服务器收到客户端的请求后，如果缓存里中能找到 <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> ，则直接返回 IP 地址；如果没有，本地 DNS 会去向根域名服务器查询。</p></li>
</ol>
<ul class="simple">
<li><p>本地 DNS 服务器至少需要知道一台根域名服务器的 IP 地址，否则就会陷入循环查询。一般来说，DNS 递归解析器都会保存一份根域名服务器的 IP 地址（IPv4 + IPv6）的配置 <a class="reference external" href="https://www.internic.net/domain/named.root">Root Hints File</a> 。</p></li>
</ul>
</li>
<li><ol class="arabic simple" start="3">
<li><p>根域名服务器收到来自本地 DNS 的请求后，发现顶级域是 <code class="docutils literal notranslate"><span class="pre">.com</span></code> ，即返回 <code class="docutils literal notranslate"><span class="pre">.com</span></code> 顶级域名服务器地址。根区文件中，顶级域名 <code class="docutils literal notranslate"><span class="pre">.com</span></code> 可以查到 13 个域名服务器：</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>com.                        172800  IN      NS      a.gtld-servers.net.
<span class="linenos"> 2</span>com.                        172800  IN      NS      b.gtld-servers.net.
<span class="linenos"> 3</span>com.                        172800  IN      NS      c.gtld-servers.net.
<span class="linenos"> 4</span>com.                        172800  IN      NS      d.gtld-servers.net.
<span class="linenos"> 5</span>com.                        172800  IN      NS      e.gtld-servers.net.
<span class="linenos"> 6</span>com.                        172800  IN      NS      f.gtld-servers.net.
<span class="linenos"> 7</span>com.                        172800  IN      NS      g.gtld-servers.net.
<span class="linenos"> 8</span>com.                        172800  IN      NS      h.gtld-servers.net.
<span class="linenos"> 9</span>com.                        172800  IN      NS      i.gtld-servers.net.
<span class="linenos">10</span>com.                        172800  IN      NS      j.gtld-servers.net.
<span class="linenos">11</span>com.                        172800  IN      NS      k.gtld-servers.net.
<span class="linenos">12</span>com.                        172800  IN      NS      l.gtld-servers.net.
<span class="linenos">13</span>com.                        172800  IN      NS      m.gtld-servers.net.
</pre></div>
</div>
<p>根区文件同时指明了这些域名服务器的 IP 地址，如：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>a.gtld-servers.net. 172800  IN      A       192.5.6.30
<span class="linenos">2</span>a.gtld-servers.net. 172800  IN      AAAA    2001:503:a83e:0:0:0:2:30
<span class="linenos">3</span>b.gtld-servers.net. 172800  IN      A       192.33.14.30
<span class="linenos">4</span>b.gtld-servers.net. 172800  IN      AAAA    2001:503:231d:0:0:0:2:30
<span class="linenos">5</span>c.gtld-servers.net. 172800  IN      A       192.26.92.30
<span class="linenos">6</span>c.gtld-servers.net. 172800  IN      AAAA    2001:503:83eb:0:0:0:0:30
<span class="linenos">7</span>d.gtld-servers.net. 172800  IN      A       192.31.80.30
<span class="linenos">8</span>d.gtld-servers.net. 172800  IN      AAAA    2001:500:856e:0:0:0:0:30
<span class="linenos">9</span>...
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.com</span></code> 域名的解析结果，可以到这 13 个服务器的任一台查询。</p>
</li>
<li><ol class="arabic simple" start="4">
<li><p>本地 DNS 服务器收到顶级域名服务器的地址后，向顶级域名服务器发起查询。</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="5">
<li><p>顶级域名服务器返回 <code class="docutils literal notranslate"><span class="pre">example.com</span></code> 的权威域名服务器的地址。</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="6">
<li><p>本地 DNS 转向问权威域名服务器查询 <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code> 对应的 IP。</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="7">
<li><p>权威域名服务器查询后将对应的 IP 地址告诉本地 DNS 服务器。</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="8">
<li><p>本地 DNS 服务器再将 IP 地址返回给客户端，客户端和目标建立连接。</p></li>
</ol>
</li>
</ul>
</section>
</section>
<section id="dig">
<h2><span class="section-number">4.4. </span>dig 命令<a class="headerlink" href="#dig" title="Permalink to this heading"></a></h2>
<p>dig 命令是查询 DNS 域名服务器的工具，它执行 DNS 搜索并打印收到请求的域名服务器的响应信息，是常用的 DNS 故障诊断工具。</p>
<p><code class="docutils literal notranslate"><span class="pre">dig</span> <span class="pre">www.baidu.com</span></code> 结果如下：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; www.baidu.com
<span class="linenos"> 2</span>;; global options: +cmd
<span class="linenos"> 3</span>;; Got answer:
<span class="linenos"> 4</span>;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 56798
<span class="linenos"> 5</span>;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>;; QUESTION SECTION:
<span class="linenos"> 8</span>;www.baidu.com.                       IN      A
<span class="linenos"> 9</span>
<span class="linenos">10</span>;; ANSWER SECTION:
<span class="linenos">11</span>www.baidu.com.                900     IN      CNAME   www.a.shifen.com.
<span class="linenos">12</span>www.a.shifen.com.     600     IN      A       180.101.49.13
<span class="linenos">13</span>www.a.shifen.com.     600     IN      A       180.101.49.14
<span class="linenos">14</span>
<span class="linenos">15</span>;; Query time: 9 msec
<span class="linenos">16</span>;; SERVER: 192.168.1.1#53(192.168.1.1)
<span class="linenos">17</span>;; WHEN: Wed Oct 26 00:34:12 CST 2022
<span class="linenos">18</span>;; MSG SIZE  rcvd: 90
</pre></div>
</div>
<p><strong>ANSWER SECTION</strong> 部分返回了解析的 IP 地址，在浏览器地址栏输入 <code class="docutils literal notranslate"><span class="pre">180.101.49.13</span></code> 或 <code class="docutils literal notranslate"><span class="pre">180.101.49.14</span></code> 即会跳转到百度首页。</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<dl class="simple">
<dt>直接使用 IP 地址可能无法访问网站</dt><dd><p>IP 地址实际上标识了一个服务器，而不是网站，同一个服务器可能挂载了多个网站。单独依靠 IP 地址不能确定匹配到哪个网站。有些服务器会定义默认的网站，当收到 IP 地址的请求时，就返回默认的网站给客户端。</p>
</dd>
</dl>
</div>
<p>使用命令 <code class="docutils literal notranslate"><span class="pre">dig</span> <span class="pre">&#64;8.8.8.8</span> <span class="pre">+trace</span> <span class="pre">www.baidu.com</span></code> 可以看到完整的解析过程。 <code class="docutils literal notranslate"><span class="pre">&#64;8.8.8.8</span></code> 表示使用公共域名服务器，而不是依次使用 <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> 里配置的本地域名服务器进行查询。</p>
<blockquote>
<div><div class="toggle docutils container">
<div class="header docutils container">
<p><em>dig &#64;8.8.8.8 +trace www.baidu.com</em></p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; @8.8.8.8 +trace www.baidu.com
<span class="linenos"> 2</span>; (1 server found)
<span class="linenos"> 3</span>;; global options: +cmd
<span class="linenos"> 4</span>.                     68139   IN      NS      e.root-servers.net.
<span class="linenos"> 5</span>.                     68139   IN      NS      a.root-servers.net.
<span class="linenos"> 6</span>.                     68139   IN      NS      l.root-servers.net.
<span class="linenos"> 7</span>.                     68139   IN      NS      b.root-servers.net.
<span class="linenos"> 8</span>.                     68139   IN      NS      d.root-servers.net.
<span class="linenos"> 9</span>.                     68139   IN      NS      m.root-servers.net.
<span class="linenos">10</span>.                     68139   IN      NS      h.root-servers.net.
<span class="linenos">11</span>.                     68139   IN      NS      k.root-servers.net.
<span class="linenos">12</span>.                     68139   IN      NS      j.root-servers.net.
<span class="linenos">13</span>.                     68139   IN      NS      f.root-servers.net.
<span class="linenos">14</span>.                     68139   IN      NS      g.root-servers.net.
<span class="linenos">15</span>.                     68139   IN      NS      i.root-servers.net.
<span class="linenos">16</span>.                     68139   IN      NS      c.root-servers.net.
<span class="linenos">17</span>.                     68139   IN      RRSIG   NS 8 0 518400 20221107050000 20221025040000 18733 . jjPuMT1Y8vXX82riF3UJ+hKsYgtYZuuTJYLaLJm/8n0A3oj5q4lEpxC1 JvhIylz3wAKa3jqhMKNtT7WE6+rD3726+IUCso4QzGIl7xXhKK6nOXef Y5ITJ8CSuRWEEg98hUI89PmYf26M0Sb5/dDYjqBFR1TZSROiE+OrwTbt OSv5SLzteSmH9GQZWRgrXCGhrqja4BqLu9gDuGXUdD4yEi9XKWoQTYX4 x7FqCrE+YDymQhQ6nq3TZ5qN+wN5iQrF6g3FDbM2SETyUzyfePKPeuS1 CSgcVqdbjIuA8W3/ItI2M89Puukes8toBZBgv1rYzU41veOzGoP5yE4J 948vdA==
<span class="hll"><span class="linenos">18</span>;; Received 525 bytes from 8.8.8.8#53(8.8.8.8) in 78 ms
</span><span class="linenos">19</span>
<span class="linenos">20</span>com.                  172800  IN      NS      e.gtld-servers.net.
<span class="linenos">21</span>com.                  172800  IN      NS      b.gtld-servers.net.
<span class="linenos">22</span>com.                  172800  IN      NS      j.gtld-servers.net.
<span class="linenos">23</span>com.                  172800  IN      NS      m.gtld-servers.net.
<span class="linenos">24</span>com.                  172800  IN      NS      i.gtld-servers.net.
<span class="linenos">25</span>com.                  172800  IN      NS      f.gtld-servers.net.
<span class="linenos">26</span>com.                  172800  IN      NS      a.gtld-servers.net.
<span class="linenos">27</span>com.                  172800  IN      NS      g.gtld-servers.net.
<span class="linenos">28</span>com.                  172800  IN      NS      h.gtld-servers.net.
<span class="linenos">29</span>com.                  172800  IN      NS      l.gtld-servers.net.
<span class="linenos">30</span>com.                  172800  IN      NS      k.gtld-servers.net.
<span class="linenos">31</span>com.                  172800  IN      NS      c.gtld-servers.net.
<span class="linenos">32</span>com.                  172800  IN      NS      d.gtld-servers.net.
<span class="linenos">33</span>com.                  86400   IN      DS      30909 8 2 E2D3C916F6DEEAC73294E8268FB5885044A833FC5459588F4A9184CF C41A5766
<span class="linenos">34</span>com.                  86400   IN      RRSIG   DS 8 1 86400 20221107050000 20221025040000 18733 . 2eKdbL4avnkLVFcFThwzZnPLYLecGO15wajb8QNcPVmfygXvTCyrnQW+ WQ77FejfdSaf8oz0mdcbyMTo1GXrIutCXqitKpu4mHZemZVhDuTXqkeV P4n/KtkPUldtmvI/Sa46Ah/jkqdFVFh62lMdkenYp+nNaEiqjheIeWtW diEwqPRIUKwA+FozM5Xl9i2OX0CsYw7b0JQmOaBglYVoYabFrcsLOqS5 nUkLOje1gzOqeNQHLMocXfo9MwD2h+1UfVbUHVt2BCjTbMj7eyUEOCq7 Clb0G9I5a3MloflVFTMRjmPz7fVd3ti5X1l0YRfKhbfISxQnkSriCmLp w90i8g==
<span class="hll"><span class="linenos">35</span>;; Received 1173 bytes from 192.58.128.30#53(j.root-servers.net) in 183 ms
</span><span class="linenos">36</span>
<span class="linenos">37</span>baidu.com.            172800  IN      NS      ns2.baidu.com.
<span class="linenos">38</span>baidu.com.            172800  IN      NS      ns3.baidu.com.
<span class="linenos">39</span>baidu.com.            172800  IN      NS      ns4.baidu.com.
<span class="linenos">40</span>baidu.com.            172800  IN      NS      ns1.baidu.com.
<span class="linenos">41</span>baidu.com.            172800  IN      NS      ns7.baidu.com.
<span class="linenos">42</span>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. 86400 IN NSEC3 1 1 0 - CK0Q2D6NI4I7EQH8NA30NS61O48UL8G5  NS SOA RRSIG DNSKEY NSEC3PARAM
<span class="linenos">43</span>CK0POJMG874LJREF7EFN8430QVIT8BSM.com. 86400 IN RRSIG NSEC3 8 2 86400 20221030042404 20221023031404 53929 com. rZituN5sci3BirVdxM4h2GBR4G1bkLTMrniYA9FAFGfxOMcDl4Fuh97f NCZDlbS1GO/PQ0FDpdwVFZ/T+tJnRyHOJxnhHFj72PuFrfGe42FGYO04 FUzo+w9D3p4nke7owPPa+NDdWnO2L1KHScU3YdsRiPCVFi+6uKhPSdpG QXG98ERm759Vkg3EYum4ML3wXBfYPpTc4L1eCRon28iiOg==
<span class="linenos">44</span>HPVUVSGH5TFIA7CM6SS6SMPOS87OE0CE.com. 86400 IN NSEC3 1 1 0 - HPVV8SARM2LDLRBTVC5EP1CUB1EF7LOP  NS DS RRSIG
<span class="linenos">45</span>HPVUVSGH5TFIA7CM6SS6SMPOS87OE0CE.com. 86400 IN RRSIG NSEC3 8 2 86400 20221030053622 20221023042622 53929 com. nDYPQZggx91aaAJR5UNDvY5DbmZAEDw9W9o+ja0RdDKoTd674kecZqag S7NYdh05TUdKAVp6YNv/SjDtTFoJtzhAYlCay21VzoxVFO9/04/sQcWJ xfT+uRyF/RU359h9PEHx08fk/CXGLFUGasK/Y82u1m2OLESicewMAc8h zCYrXWOkQKqacKtSSXEBX2qb1rygJDieMTDRovWd94uFmg==
<span class="hll"><span class="linenos">46</span>;; Received 849 bytes from 192.42.93.30#53(g.gtld-servers.net) in 170 ms
</span><span class="linenos">47</span>
<span class="linenos">48</span>www.baidu.com.                1200    IN      CNAME   www.a.shifen.com.
<span class="hll"><span class="linenos">49</span>;; Received 72 bytes from 220.181.33.31#53(ns2.baidu.com) in 36 ms
</span></pre></div>
</div>
</div>
</div></blockquote>
<p>查询网站 IP 地址还可以通过如下方式：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">nslookup</span> <span class="pre">www.baidu.com</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>Server:   192.168.1.1
<span class="linenos">2</span>Address:  192.168.1.1#53
<span class="linenos">3</span>
<span class="linenos">4</span>Non-authoritative answer:
<span class="linenos">5</span>www.baidu.com       canonical name = www.a.shifen.com.
<span class="linenos">6</span>Name:       www.a.shifen.com
<span class="linenos">7</span>Address: 180.101.49.14
<span class="linenos">8</span>Name:       www.a.shifen.com
<span class="linenos">9</span>Address: 180.101.49.13
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ping</span> <span class="pre">-c</span> <span class="pre">5</span> <span class="pre">www.baidu.com</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>PING www.baidu.com (180.101.49.14): 56 data bytes
<span class="linenos"> 2</span>64 bytes from 180.101.49.14: icmp_seq=0 ttl=53 time=20.753 ms
<span class="linenos"> 3</span>64 bytes from 180.101.49.14: icmp_seq=1 ttl=53 time=20.324 ms
<span class="linenos"> 4</span>64 bytes from 180.101.49.14: icmp_seq=2 ttl=53 time=20.617 ms
<span class="linenos"> 5</span>64 bytes from 180.101.49.14: icmp_seq=3 ttl=53 time=20.687 ms
<span class="linenos"> 6</span>64 bytes from 180.101.49.14: icmp_seq=4 ttl=53 time=12.662 ms
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>--- www.baidu.com ping statistics ---
<span class="linenos"> 9</span>5 packets transmitted, 5 packets received, 0.0% packet loss
<span class="linenos">10</span>round-trip min/avg/max/stddev = 12.662/19.009/20.753/3.177 ms
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">www.baidu.com</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>www.baidu.com is an alias for www.a.shifen.com.
<span class="linenos">2</span>www.a.shifen.com has address 180.101.49.13
<span class="linenos">3</span>www.a.shifen.com has address 180.101.49.14
</pre></div>
</div>
</li>
</ul>
<p>对同一个网站查询得到的 IP 地址并不是固定唯一的，网站服务器可能有很多（负载均衡）。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>查询百度 IP 的时候可以发现， <code class="docutils literal notranslate"><span class="pre">www.baidu.com</span></code> 是 <code class="docutils literal notranslate"><span class="pre">www.a.shifen.com.</span></code> 的一个别名。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>查询本机 IP 地址：</p>
<blockquote>
<div><p>使用指令 <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">addr</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">inet</span></code> 或 <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">inet</span></code> （Windows 使用 <code class="docutils literal notranslate"><span class="pre">ipconfig</span></code> ）查询得到的是本机的局域网/内网/私有 IP 地址。这类 IP 地址形式如：</p>
<ul class="simple">
<li><p>10.x.x.x</p></li>
<li><p>172.16.x.x - 172.31.x.x</p></li>
<li><p>192.168.x.x</p></li>
<li><p>…</p></li>
</ul>
<p>多个内部主机可以使用同一个公网 IP 地址上网（NAT网络地址转换），以达到节省 IP 地址的作用。</p>
<p>要想得到公网/外网/公有 IP 地址，可使用 curl 命令：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">ifconfig.me</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">www.cip.cc</span></code></p></li>
<li><p>…</p></li>
</ul>
<p>运营商可能有多个出口，因此在不同网站上看到的公网 IP 地址可能不同。</p>
</div></blockquote>
</div>
</section>
<section id="id8">
<h2><span class="section-number">4.5. </span>参考资料<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>域名</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D">https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D</a></p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>互联网顶级域列表</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%88%97%E8%A1%A8">https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%88%97%E8%A1%A8</a></p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>根域名服务器</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://zh.wikipedia.org/wiki/%E6%A0%B9%E7%B6%B2%E5%9F%9F%E5%90%8D%E7%A8%B1%E4%BC%BA%E6%9C%8D%E5%99%A8">https://zh.wikipedia.org/wiki/%E6%A0%B9%E7%B6%B2%E5%9F%9F%E5%90%8D%E7%A8%B1%E4%BC%BA%E6%9C%8D%E5%99%A8</a></p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>根域名的知识</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://www.ruanyifeng.com/blog/2018/05/root-domain.html">https://www.ruanyifeng.com/blog/2018/05/root-domain.html</a></p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Root Files</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://www.iana.org/domains/root/files">https://www.iana.org/domains/root/files</a></p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>应用层 DNS 协议、相关命令总结</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://qidawu.github.io/">https://qidawu.github.io/</a></p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="03_router.html" class="btn btn-neutral float-left" title="3. 网桥、交换机、路由器、网关" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../link/index.html" class="btn btn-neutral float-right" title="资源链接" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2022, fong.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<script type="text/javascript">
    $(document).ready(function() {
     $(".toggle > *").hide();
     $(".toggle .header").show();
     $(".toggle .header").click(function() {
      $(this).parent().children().not(".header").toggle(400);
      $(this).parent().children(".header").toggleClass("open");
     })
    });
</script>


</body>
</html>