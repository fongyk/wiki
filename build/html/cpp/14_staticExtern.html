<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14. static 和 extern &mdash; fong alpha documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/magnum.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="15. public/protected/private" href="15_classAccess.html" />
    <link rel="prev" title="13. 空类指针" href="13_nullClassPtr.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> fong
            <img src="../_static/magnum.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                alpha
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../link/index.html">快速访问</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">C/C++</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_main.html">1. main函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_array.html">2. 数组</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_typeSize.html">3. 数据类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_classSize.html">4. 类的大小</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_swap.html">5. 交换函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_arrayArg.html">6. 数组形参</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_pointerReference.html">7. 指针与引用</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_overload.html">8. 重载、覆盖、隐藏</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_strcpy.html">9. strcpy 函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_cast.html">10. 强制类型转换</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_heapStack.html">11. 堆和栈</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_argPass.html">12. 参数传递</a></li>
<li class="toctree-l2"><a class="reference internal" href="13_nullClassPtr.html">13. 空类指针</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14. static 和 extern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">14.1. 静态全局变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">14.2. 静态函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">14.3. 静态局部变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">14.4. 静态成员变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">14.5. 静态成员函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extern">14.6. extern: 修饰函数、变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extern-c">14.7. extern “C” {}</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">14.8. 参考资料</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="15_classAccess.html">15. public/protected/private</a></li>
<li class="toctree-l2"><a class="reference internal" href="16_staticconst.html">16. 类的 static const 成员</a></li>
<li class="toctree-l2"><a class="reference internal" href="17_enumUnion.html">17. 枚举类型与共用体</a></li>
<li class="toctree-l2"><a class="reference internal" href="18_commonFunc.html">18. 常用函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="19_stl.html">19. 常用 STL 容器</a></li>
<li class="toctree-l2"><a class="reference internal" href="20_define.html">20. #define</a></li>
<li class="toctree-l2"><a class="reference internal" href="21_operatorPrior.html">21. 运算符优先级</a></li>
<li class="toctree-l2"><a class="reference internal" href="22_const.html">22. const 和 constexpr</a></li>
<li class="toctree-l2"><a class="reference internal" href="23_copyControl.html">23. 拷贝控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="24_exception.html">24. 异常</a></li>
<li class="toctree-l2"><a class="reference internal" href="25_namespace.html">25. 命名空间</a></li>
<li class="toctree-l2"><a class="reference internal" href="26_lambda.html">26. lambda 表达式</a></li>
<li class="toctree-l2"><a class="reference internal" href="27_singleton.html">27. 单例模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="28_vaFunc.html">28. 可变参数函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="29_operatorOverload.html">29. 运算符重载</a></li>
<li class="toctree-l2"><a class="reference internal" href="30_templateSpecialization.html">30. 模板特化</a></li>
<li class="toctree-l2"><a class="reference internal" href="31_autoType.html">31. 类型推导</a></li>
<li class="toctree-l2"><a class="reference internal" href="32_universalReference.html">32. 通用引用和右值引用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux/index.html">Linux/Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machineLearning/index.html">机器学习</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepLearning/index.html">深度学习</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathematicsAlgorithm/index.html">数理与算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recommender/index.html">推荐系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regularExpression/index.html">正则表达式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cron/index.html">Cron 表达式</a></li>
<li class="toctree-l1"><a class="reference internal" href="../computerNetwork/index.html">计算机网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../softwares/index.html">实用软件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tech/index.html">技巧</a></li>
<li class="toctree-l1"><a class="reference internal" href="../else/index.html">其他</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fong</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">C/C++</a> &raquo;</li>
      <li><span class="section-number">14. </span>static 和 extern</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cpp/14_staticExtern.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="static-extern">
<h1><span class="section-number">14. </span>static 和 extern<a class="headerlink" href="#static-extern" title="Permalink to this headline"></a></h1>
<section id="id1">
<h2><span class="section-number">14.1. </span>静态全局变量<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<p>在全局变量前，加上关键字 static，该变量就被定义成为一个静态全局变量。
特点：</p>
<blockquote>
<div><ul class="simple">
<li><p>该变量在 <strong>全局数据区</strong> 分配内存；</p></li>
<li><p>未经初始化的静态全局变量会被程序自动初始化为 0；（自动变量的值是随机的，除非它被显式初始化）</p></li>
<li><p>静态全局变量在声明它的整个文件都是可见的，而在 <strong>文件之外是不可见的</strong> ，其它文件中可以定义相同名字的变量，不会发生冲突。</p></li>
</ul>
</div></blockquote>
</section>
<section id="id2">
<h2><span class="section-number">14.2. </span>静态函数<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<p>在函数的返回类型前加上 static 关键字，函数即被定义为静态函数。
静态函数与普通函数不同，它 <strong>只能在声明它的文件当中可见</strong> ，不能被其它文件使用。
其它文件中可以定义相同名字的函数，不会发生冲突，这点与静态全局变量相似。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果在头文件中定义 static 全局变量/函数，在已经 include 该头文件的源文件中是可以直接使用这个 static 全局变量/函数（相当于头文件的内容在当前文件中展开）。</p>
<p><a class="reference external" href="https://stackoverflow.com/a/5040577">Static variables are local to the compilation unit</a> . A compilation unit is basically a <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file with the contents of the <code class="docutils literal notranslate"><span class="pre">.h</span></code> file inserted in place of each <code class="docutils literal notranslate"><span class="pre">#include</span></code> directive.</p>
<p>多个源文件 include 该头文件也可以编译通过，相当于各个源文件中都定义了只在各自文件内可见的 static 全局变量/函数。</p>
</div>
</section>
<section id="id3">
<h2><span class="section-number">14.3. </span>静态局部变量<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<p>在局部变量前，加上关键字 static，该变量就被定义成为一个静态局部变量。
特点：</p>
<blockquote>
<div><ul class="simple">
<li><p>该变量在全局数据区分配内存；</p></li>
<li><p>静态局部变量在程序执行到该对象的声明处时被首次初始化，即 <strong>以后的函数调用不再进行初始化</strong> ；</p></li>
<li><p>静态局部变量一般在声明处初始化，如果没有显式初始化，会被程序自动初始化为 0；</p></li>
<li><p>它始终驻留在全局数据区，其生命周期一直持续到整个程序执行结束。但其作用域仍为局部作用域，当定义它的函数或语句块结束时，其作用域随之结束。一般情况下，对于局部变量是存放在栈区的，并且局部变量的生命周期在该语句块执行结束时便结束了。</p></li>
</ul>
</div></blockquote>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">()</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 初次调用func()时才会执行初始化</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 6</span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="linenos"> 9</span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="n">func</span><span class="p">();</span><span class="w"> </span><span class="c1">// 1</span>
<span class="linenos">11</span><span class="w">    </span><span class="n">func</span><span class="p">();</span><span class="w"> </span><span class="c1">// 2</span>
<span class="linenos">12</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="id4">
<h2><span class="section-number">14.4. </span>静态成员变量<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h2>
<p>在类内数据成员的声明前加上关键字 static，该数据成员就是类内的静态数据成员。
特点：</p>
<blockquote>
<div><ul class="simple">
<li><p>对于非静态数据成员，每个类对象都有自己的拷贝。而静态数据成员被当作是类的成员。无论这个类的对象被定义了多少个，静态数据成员在程序中也只有一份拷贝，由该类型的所有对象共享访问。在没有产生类的实例时，我们就可以操作它。</p></li>
<li><p>静态数据成员存储在全局数据区。静态数据成员定义时要分配空间，所以不能在类声明中定义。</p></li>
<li><p>静态数据成员和普通数据成员一样遵从 public/protected/private 访问规则。</p></li>
<li><p>（类定义体外部）静态数据成员初始化与一般数据成员初始化不同。静态数据成员初始化的格式为：
<code class="docutils literal notranslate"><span class="pre">＜数据类型＞</span> <span class="pre">＜类名＞::＜静态数据成员名＞</span> <span class="pre">=</span> <span class="pre">＜值＞</span></code></p></li>
<li><p>类的静态数据成员有两种访问形式：
<code class="docutils literal notranslate"><span class="pre">＜类对象名＞.＜静态数据成员名＞</span> <span class="pre">或</span> <span class="pre">＜类类型名＞::＜静态数据成员名＞</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="id5">
<h2><span class="section-number">14.5. </span>静态成员函数<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h2>
<p>普通的成员函数一般都隐含了一个 <code class="docutils literal notranslate"><span class="pre">this</span></code> 指针， <code class="docutils literal notranslate"><span class="pre">this</span></code> 指针指向类的对象本身，因为普通成员函数总是具体的属于某个类的具体对象的。
通常情况下， <code class="docutils literal notranslate"><span class="pre">this</span></code> 是缺省的，如函数 <code class="docutils literal notranslate"><span class="pre">fn()</span></code> 实际上是 <code class="docutils literal notranslate"><span class="pre">this-&gt;fn()</span></code> 。
但是与普通函数相比，静态成员函数由于不是与任何的对象相联系，因此它 <strong>不具有this指针</strong> 。
从这个意义上讲，它 <strong>无法访问属于类对象的非静态数据成员，也无法访问非静态成员函数，它只能调用其余的静态成员函数</strong> 。
非静态成员函数可以任意地访问静态成员函数和静态数据成员。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">class</span><span class="w"> </span><span class="nc">Myclass</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span><span class="w">  </span><span class="c1">//声明静态数据成员</span>
<span class="linenos"> 6</span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">    </span><span class="n">Myclass</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">GetSum</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 9</span><span class="p">};</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="kt">int</span><span class="w"> </span><span class="n">Myclass</span><span class="o">::</span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="c1">//定义并初始化静态数据成员</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">Myclass</span><span class="o">::</span><span class="n">Myclass</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"></span>
<span class="linenos">14</span><span class="p">{</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="linenos">18</span><span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="linenos">19</span><span class="p">}</span><span class="w"></span>
<span class="linenos">20</span><span class="kt">void</span><span class="w"> </span><span class="n">Myclass</span><span class="o">::</span><span class="n">GetSum</span><span class="p">()</span><span class="w"></span>
<span class="linenos">21</span><span class="p">{</span><span class="w"></span>
<span class="linenos">22</span><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;sum=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">23</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>静态成员函数可以调用构造函数，调用构造函数并不需要 <code class="docutils literal notranslate"><span class="pre">this</span></code> 指针。当构造函数是私有的，不能像普通类那样实例化，这时候可以通过静态成员函数调用构造函数（比如在实现单例的时候）。</p>
</div>
</section>
<section id="extern">
<h2><span class="section-number">14.6. </span>extern: 修饰函数、变量<a class="headerlink" href="#extern" title="Permalink to this headline"></a></h2>
<p>修饰符 <code class="docutils literal notranslate"><span class="pre">extern</span></code> 用在变量或者函数的声明前，用来说明 <strong>“此变量/函数是在别处定义的，要在此处引用”</strong> 。
在别的文件中如果想调用 <code class="docutils literal notranslate"><span class="pre">file1.c</span></code> 中的变量 <code class="docutils literal notranslate"><span class="pre">a</span></code> ，只须用 <code class="docutils literal notranslate"><span class="pre">extern</span></code> 进行声明即可调用 <code class="docutils literal notranslate"><span class="pre">a</span></code> ：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// file2.c</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// file3.cpp</span>
</pre></div>
</div>
<p>在这里要注意 <code class="docutils literal notranslate"><span class="pre">extern</span></code> 声明的位置对其作用域也有关系，如果是在 main 函数中进行声明的，则只能在 main 函数中调用，在其它函数中不能调用。
其实要调用其它文件中的函数和变量，只需把该文件用 <code class="docutils literal notranslate"><span class="pre">#include</span></code> 包含进来即可，但是用 <code class="docutils literal notranslate"><span class="pre">extern</span></code> 会加速程序的编译过程，这样能节省时间。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>全局变量是不显式用 static 修饰的全局变量，全局变量默认是有外部链接性的，作用域是整个工程。在一个文件内定义的全局变量，在另一个文件中，通过 extern 全局变量名的声明，就可以使用该全局变量。</p></li>
<li><p>全局静态变量是显式用 static 修饰的全局变量，作用域是声明此变量所在的文件，其他的文件即使用 extern 声明也不能使用。</p></li>
<li><p>C++ const 全局常量具有静态/内部链接，这与 C 语言不同。C++ 编译器优化全局常量，不为其保留任何空间。如果尝试在其他文件中通过 extern 使用该全局常量，则出现编译错误（ <em>无法解析的外部符号 unresolved external symbol</em> ）。解决此错误的一种方式是在头文件中进行 const 全局常量初始化，在需要使用该全局常量的源文件中 include 该头文件。在不同源文件中对该常量进行取址（ <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> ），会得到不同的地址，这说明每个源文件都有一份常量的定义，而不是共享一个常量。C 编译器对定义在头文件的 const 常量会报错。</p></li>
</ul>
</div>
</section>
<section id="extern-c">
<h2><span class="section-number">14.7. </span>extern “C” {}<a class="headerlink" href="#extern-c" title="Permalink to this headline"></a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#ifndef HEADER_INCLUDED </span><span class="c1">// 条件编译，避免重复包含头文件</span>
<span class="linenos"> 2</span><span class="cp">#define HEADER_INCLUDED</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="cp">#ifdef __cplusplus </span><span class="c1">// extern &quot;C&quot; 只用在 c++ 文件中</span>
<span class="linenos"> 5</span><span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="cp">#endif </span><span class="cm">/* __cplusplus */</span><span class="cp"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;c.h&quot;</span><span class="cp"></span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">strcpy</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">,</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="p">);</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="cm">/*.................................</span>
<span class="linenos">13</span><span class="cm"> * do something else</span>
<span class="linenos">14</span><span class="cm"> *.................................</span>
<span class="linenos">15</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="cp">#ifdef __cplusplus</span>
<span class="linenos">18</span><span class="p">}</span><span class="w"></span>
<span class="linenos">19</span><span class="cp">#endif </span><span class="cm">/* __cplusplus */</span><span class="cp"></span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="cp">#endif </span><span class="cm">/* HEADER_INCLUDED */</span><span class="cp"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">C</span></code> ，表示的一种编译和连接规约，表明它按照类 C 的编译和连接规约来编译和连接，而不是一种语言。
<code class="docutils literal notranslate"><span class="pre">C</span></code> 表示 <strong>符合C语言的编译和连接规约的任何语言</strong> ，如 Fortran、assembler 等。
<code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> 的真实目的是实现 <strong>类C</strong> 和 C++ 的混合编程。</p>
</section>
<section id="id6">
<h2><span class="section-number">14.8. </span>参考资料<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>C/C++中的static关键字详解</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://www.cnblogs.com/qintangtao/p/3285937.html">https://www.cnblogs.com/qintangtao/p/3285937.html</a></p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>C++项目中的extern “C” {}</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://www.cnblogs.com/skynet/archive/2010/07/10/1774964.html">https://www.cnblogs.com/skynet/archive/2010/07/10/1774964.html</a></p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>浅谈C/C++中的static和extern关键字</p></li>
</ol>
<blockquote>
<div><p><a class="reference external" href="https://www.cnblogs.com/dolphin0520/archive/2011/04/20/2022701.html">https://www.cnblogs.com/dolphin0520/archive/2011/04/20/2022701.html</a></p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="13_nullClassPtr.html" class="btn btn-neutral float-left" title="13. 空类指针" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="15_classAccess.html" class="btn btn-neutral float-right" title="15. public/protected/private" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2024, fong.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<script type="text/javascript">
    $(document).ready(function() {
     $(".toggle > *").hide();
     $(".toggle .header").show();
     $(".toggle .header").click(function() {
      $(this).parent().children().not(".header").toggle(400);
      $(this).parent().children(".header").toggleClass("open");
     })
    });
</script>


</body>
</html>